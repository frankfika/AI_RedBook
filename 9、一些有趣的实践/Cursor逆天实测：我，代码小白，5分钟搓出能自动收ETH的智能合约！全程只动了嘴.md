# Cursor逆天实测：我，代码小白，5分钟搓出能自动收ETH的智能合约！全程只动了嘴



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619108)









**最近因为一些特殊情况，被迫去了解合约相关事情。突然发现，cursor竟然也可以写！！**

**
**

**而且不仅会写，他还可以作为一个陪读，教你智能合约的一些原理和代码的意义**









**01**

**先科普下，区块链和智能合约是什么**

------



区块链是一种去中心化的分布式账本技术，最初用于支持比特币等加密货币。它通过将数据存储在一个个称为“区块”的单元中，并将这些区块按时间顺序链接起来，确保数据的安全性和不可篡改性。每**个区块中都包含了一组交易记录，所有参与者都可以查看这些记录，从而提高了透明度和信任度**。





**智能合约的定义**



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619085)



**智能合约可以被视为一种数字合约，存储在区块链上。当满足预设条件时，这些合约会自动执行。**例如，如果两个人达成协议，智能合约可以在双方都完成各自的承诺后，自动进行资金转移或其他操作。智能合约的执行遵循简单的逻辑，比如“如果...那么...”的规则，这样就不需要中介来处理交易，大大提高了效率。



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619094)



- **智能合约的优势**
	- **自动化：**减少人为干预，降低错误风险。
	- **透明性：**所有交易记录公开，任何人都可以验证。
	- **安全性：**一旦部署在区块链上，合约内容无法被篡改。



- 智能合约在多个领域都有广泛应用，包括：
	- 金融服务：实现点对点交易，无需中介，降低成本。
	- 供应链管理：实时监控产品流动，提高透明度。
	- 版权保护：自动管理创作者的版权信息和授权。







**02**

**准备工作开始了！**

------



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619072)



智能合约根据不同的链条有不同的写法，但是现在绝大多数都是EVM基础上的二层链。所以以太坊的语法和合约上我们的起步，本次我就教授打架学会。为了节省开支，这次我选择的是以太坊的测试网



**注册一个metamask钱包**

------



**科学上网我就不再这里交了，自行解决。**

-去chrome的插件市场，搜索metamask。然后按照要求注册钱包。记住记下助记词。

登陆完成后。



-点击钱包左上角，切换到以太坊的测试网（Sepolia）。

![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619133)



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619115)







**去搞点水龙头（测试币）**

------



因为测试网，肯定是需要一些测试代币去测试的。目前有很多可以免费领取的地方，我这边推荐谷歌的，每天可以领取0.05 eth，基本够用了。



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619124)



- **谷歌的链接：**https://cloud.google.com/application/web3/faucet/ethereum/sepolia



你要是不够，可以再去一些其他平台领取，典型的平台包括：

- **Alchemy Sepolia Faucet ：**https://sepoliafaucet.com/ 
- **Infura Sepolia Faucet ：**https://www.infura.io/faucet/sepolia 
- **QuickNode Faucet：** https://faucet.quicknode.com/ethereum/sepolia 







**03**

**交给AI快速开写！**

------



**Step 1：初始化文件**

在本地建立一个文件夹，cursor中，然后cmd+i打开chat。



**Step 2:输入你的提示词：**

比如创建一个erc20的提示词是：

![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619163)



**结果如下：**

（后面我让他精简了一下，因为gas费用太高了）

![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619084)



还有很多其他应用我就不举例子了，你如果不知道，你可以直接问chat，让他给你举例子，然后写代码。**基本上，一次就可以生成，你可能需要做一些微调，但是基本改动不大。** 



但是你要注意的是，线上的存储和运算极贵，**你不要太多字符，也不要太多运算，否则你就会发现你的每次操作的gas费贵上天了。。（我就被这个问题折磨了好久）。。**



举个例子，我之前想做一个有权重的投票，但是发现如果你把计算权重这个功能写到了链上的合约里面，就会很贵；所以这种只能放到链下计算，如果你不会，还是可以chat中问cursor。







**04**

**部署智能合约到线上**

------



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619081)





有很多不同的部署方式，我不喜欢配置本地环境，所以这次我选择网络ide部署。这里我选择的是remix。**（请注意：合约一旦上线就不接受修改，你要是想修改，只能按照刚才的样子重新部署一个）**



登录remix的官网，注册。然后将文件复制进来。（直接在根目录创建一个.sol的文件就好）



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619146)



选择左边第三个tab——solidty compiler。选择编译对应的文件，记住你这里的编译版本要和你之前文档里的对应。。**注意compiler的版本要和你的代码上面的引入对的上。** （一般选择0.8.20 shanghai那个就行，但是你要确保你自己代码文件里面也写的是这个）



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619142)



选择左边第四个tab——Deploy and run transaction。将environment里面选择——injected provider - Metamask (即小狐狸钱包），验证完成。 



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619243.png)





点击deploy，交钱（测试币），完成。（有时候你发现你的gas费用过高，你就考虑下重新优化你的文件吧）



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619154)



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619193)



执行完毕后，在remix界面的下方console，可以看到结果。其中里面的contract就是你的合约地址。



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619174)



**（这里还有一个踩过的坑就是session和cache很影响体验，会在你操作过程中产生一堆莫名其妙的bug，如果你deploy点不动或者出现其他问题，建议先更换浏览器，再清**除**cache尝试，有一定概率可以马上好）**







**06**

**验证的智能合约**

------



打开测试网站：https://sepolia.etherscan.io/。 复制你的合约地址，你就可以看到你的完整的界面了。



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619190)



点击上图中的contract，然后再点击verify and publish。然后开始补充下contract details，基本你按照我图中的做就好。其中compiler version按照你自己的版本来。填写完毕，点击continue。



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619184)



然后把你的remix代码复制到下面空白，点击提交就完成了。 

![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619204)







**07**

**测试你的智能合约**

------



提交后，再回到刚词的页面，就可以看到contract下面有read和write的对应。 之后你就可以输入值去做测试了。



![图片](./Cursor%E9%80%86%E5%A4%A9%E5%AE%9E%E6%B5%8B%EF%BC%9A%E6%88%91%EF%BC%8C%E4%BB%A3%E7%A0%81%E5%B0%8F%E7%99%BD%EF%BC%8C5%E5%88%86%E9%92%9F%E6%90%93%E5%87%BA%E8%83%BD%E8%87%AA%E5%8A%A8%E6%94%B6ETH%E7%9A%84%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%EF%BC%81%E5%85%A8%E7%A8%8B%E5%8F%AA%E5%8A%A8%E4%BA%86%E5%98%B4.assets/640-20250503222619224)



好了到此位置你的第一个智能合约就完成了，这是在测试网；**如果你有兴趣，部署到主网，其实代码和步骤不需要变化，只是你部署的时候小狐狸钱包切换到主网就好。**



我文中的代码仅作示例，cursor有时候生成不准确，你需要和他有几个反复。你如果需要直接的代码，可以参考我的 

github：https://github.com/frankfika/dapphackthon 

