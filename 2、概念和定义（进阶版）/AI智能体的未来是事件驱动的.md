# AI智能体的未来是事件驱动的

> 本文译自：[The Future of AI Agents is Event-Driven](https://medium.com/@seanfalconer/the-future-of-ai-agents-is-event-driven-9e25124060d6)
>
> 译者注：本文探讨了AI智能体的未来发展趋势，尤其是事件驱动架构（EDA）对智能体规模化的关键作用。

AI智能体将通过自主解决问题、适应性工作流和可扩展性变革企业运营。但真正的挑战不是构建更好的模型。

智能体需要访问数据、工具，以及跨系统共享信息的能力，同时其输出能够被多个服务（包括其他智能体）使用。这不是AI问题，而是基础设施和数据互操作性问题。它需要的不仅仅是将命令链拼接在一起，而是需要由数据流支持的事件驱动架构（EDA）。

正如[HubSpot首席技术官Dharmesh Shah](https://www.forbes.com/sites/johnkoetsier/2024/09/18/ai-agents-are-the-new-apps-say-hubspot-salesforce/)所说："智能体是新一代的应用。"要实现这一潜力，从一开始就需要投资于正确的设计模式。本文探讨了为什么EDA是扩展智能体和释放其在现代企业系统中的全部潜力的关键。

要充分理解为什么EDA对下一波AI浪潮至关重要，我们必须首先了解AI是如何演变到这一点的。

## AI的演变

AI已经历了两个明显的浪潮，现在正进入第三个浪潮。前两个浪潮开启了新的可能性，但也存在关键限制。

### 第一波AI：预测模型

第一波AI围绕传统机器学习，专注于狭义定义任务的预测能力。

![传统机器学习工作流](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*9QjdaH-K_QobeANe.png)

*传统机器学习工作流*

构建这些模型需要大量专业知识，因为它们是专门为个别用例定制的。它们是特定领域的，其领域特性嵌入在训练数据中，使其刚性强且难以重新利用。将模型适应到新领域通常意味着从头开始——这种方法**缺乏可扩展性**并**减缓了采用速度**。

### 第二波AI：生成式模型

生成式AI，由深度学习驱动，标志着一个转折点。

这些生成式模型不再局限于单一领域，而是在庞大、多样化的数据集上进行训练，使它们能够在各种情境下进行泛化。它们可以生成文本、图像，甚至视频，开创了令人兴奋的新应用。然而，这一浪潮也带来了自己的挑战。

生成式模型是**固定在特定时间点**的——无法纳入新的或动态信息——且**难以适应**。微调可以解决特定领域的需求，但成本高且容易出错。微调需要大量数据、大量计算资源和机器学习专业知识，使其在许多情况下不切实际。此外，由于大语言模型（LLM）基于公开可用的数据进行训练，它们无法访问特定领域的信息，限制了它们准确回答需要上下文的问题的能力。

例如，假设你要求生成式模型根据用户的个人健康历史、位置和财务目标推荐一份保险政策。

![大语言模型的简单提示和响应](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*ZB8we0o-J8aDKkLc.png)

*大语言模型的简单提示和响应*

在这种情况下，你向LLM提供提示，它生成响应。显然，模型无法提供准确的建议，因为它无法访问相关的用户数据。没有这些数据，响应要么是泛泛而谈，要么就是完全错误的。

### 复合AI弥合了差距

为了克服这些限制，[复合AI](https://bair.berkeley.edu/blog/2024/02/18/compound-ai-systems/)系统将生成式模型与其他组件（如程序逻辑、数据检索机制和验证层）集成在一起。这种模块化设计允许AI以静态模型无法实现的方式组合工具、获取相关数据并定制输出。

例如，在保险推荐示例中：

- 检索机制从安全数据库中提取用户的健康和财务数据。
- 这些数据在提示组装期间添加到提供给LLM的上下文中。
- LLM使用组装好的提示生成准确的响应。

![简单的RAG架构](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*ddjC8ylP45Syvo2v.png)

*简单的RAG架构*

这个过程，被称为**检索增强生成（RAG）**，通过动态将相关数据纳入模型的工作流程，弥合了静态AI与现实世界需求之间的差距。

虽然RAG有效地处理了这类任务，但它依赖于**固定工作流**，这意味着每个交互和执行路径都必须预先定义。这种刚性使其难以处理那些工作流无法详尽编码的更复杂或动态任务。手动编码所有可能的执行路径既耗时又有局限性。

固定流程架构的局限性导致了第三波AI的兴起：**智能体系统**。

## 智能体AI的崛起

虽然AI已经走了很长一段路，但我们正在触及固定系统甚至LLM的极限。

据报道，谷歌的Gemini[未能达到内部预期](https://www.deeplearning.ai/the-batch/issue-276/)，尽管它在更大的数据集上进行了训练。OpenAI及其下一代Orion模型也[报告了类似的结果](https://www.theinformation.com/articles/openai-shifts-strategy-as-rate-of-gpt-ai-improvements-slows)。

Salesforce首席执行官Marc Benioff最近在《华尔街日报》的"[一切的未来](https://www.wsj.com/podcasts/wsj-the-future-of-everything/bold-names-salesforce-ceo-marc-benioff-and-the-ai-fantasy-land/804efa7d-b834-4bd2-b634-e90d8985a2cb)"播客中表示，我们已经达到了LLM能力的上限。他认为未来在于自主智能体——能够独立思考、适应和行动的系统——而不是像GPT-4这样的模型。

智能体带来了新的东西：**动态、上下文驱动的工作流**。与固定路径不同，智能体系统可以即时确定下一步，适应当前情况。这使它们非常适合解决企业今天面临的那些不可预测的、相互关联的问题。

![控制逻辑，程序化与智能体对比](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*9LbCjQ5DeV7JbAgb.png)

*控制逻辑，程序化与智能体对比*

智能体颠覆了传统控制逻辑。

与刚性程序指导每一步不同，智能体使用LLM来驱动决策。它们可以推理、使用工具和访问记忆——所有这些都是动态的。这种灵活性允许工作流在实时中演变，使智能体比任何基于固定逻辑构建的系统都强大得多。

![智能体架构](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*J52SxiVNJx_Jerh3.png)

*智能体架构（灵感来自[https://arxiv.org/pdf/2304.03442](https://arxiv.org/pdf/2304.03442)）*

## 设计模式如何塑造更智能的智能体

AI智能体的力量不仅来自于其核心能力，还来自于构建其工作流和交互的设计模式。这些模式使智能体能够解决复杂问题、适应变化环境并有效协作。

让我们来看一些能实现有效智能体的常见设计模式。

### 反思：通过自我评估改进

反思允许智能体评估自己的决策，并在采取行动或提供最终响应之前改进其输出。这种能力使智能体能够发现并纠正错误，完善其推理，并确保更高质量的结果。

![智能体的反思设计模式](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*s0qSP1abD9t5ChEp.png)

*智能体的反思设计模式*

### 工具使用扩展智能体能力

与外部工具接口扩展了智能体的功能，使其能够执行检索数据、自动化流程或执行确定性工作流等任务。这对于需要严格准确性的操作特别有价值，例如数学计算或数据库查询，其中精确性是不可协商的。工具使用弥合了灵活决策与可预测、可靠执行之间的差距。

![智能体的工具使用设计模式](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*3LXbMVYICaW_U5Fl.png)

*智能体的工具使用设计模式*

### 规划将目标转化为行动

具有规划能力的智能体可以将高级目标分解为可行的步骤，以逻辑顺序组织任务。这种设计模式对于解决多步骤问题或管理具有依赖关系的工作流至关重要。

![智能体的规划设计模式](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*bzzQfM9yvEEhjwkU.png)

*智能体的规划设计模式*

### 多智能体协作：模块化思维

多智能体系统通过将特定任务分配给专门的智能体，采用模块化方法解决问题。这种方法提供了灵活性：你可以为特定任务的智能体使用更小的语言模型（SLM），以提高效率并简化内存管理。模块化设计通过保持每个智能体的上下文专注于其特定任务，降低了个体智能体的复杂性。

一种相关技术是[**专家混合（MoE）**](https://huggingface.co/blog/moe)，它在单一框架内使用专门的子模型或"专家"。与多智能体协作类似，MoE动态地将任务路由到最相关的专家，优化计算资源并增强性能。这两种方法都强调模块化和专业化——无论是通过多个独立工作的智能体，还是通过统一模型中的任务特定路由。

就像在传统系统设计中一样，将问题分解为模块化组件使它们更容易维护、扩展和适应。通过协作，这些专门智能体共享信息、分配责任并协调行动，以更有效地应对复杂挑战。

![智能体的多智能体协作设计模式](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*yd140bWKeFb8Ow5z.png)

*智能体的多智能体协作设计模式*

简而言之，智能体不仅仅执行工作流；它们重塑了我们对工作流的思考方式。它们是构建可扩展、适应性AI系统的下一步——超越传统架构的约束和当前LLM的局限性。

## 智能体RAG：自适应和上下文感知检索

智能体RAG通过使RAG更加动态和上下文驱动来进化。智能体不依赖固定工作流，而是可以根据手头任务实时确定它们需要什么数据、在哪里找到它以及如何根据任务调整查询。这种灵活性使智能体RAG非常适合处理需要响应性和适应性的复杂、多步骤工作流。

例如，创建营销策略的智能体可能首先从CRM中提取客户数据，使用API收集市场趋势，并随着新信息的出现调整其方法。通过记忆保留上下文并迭代其查询，智能体产生更准确和相关的输出。智能体RAG将检索、推理和行动结合在一起。

![智能体RAG设计模式](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*AiHLPt89zczWCbGD.png)

*智能体RAG设计模式*

## 扩展智能智能体的挑战

扩展智能体——无论是单个智能体还是协作系统——关键在于它们轻松访问和共享数据的能力。智能体需要从多个来源收集信息，包括其他智能体、工具和外部系统，以做出决策并采取行动。

![单个智能体依赖关系](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*0ddArmzr7KmNnxm5.png)

*单个智能体依赖关系*

将智能体连接到它们需要的工具和数据本质上是一个**分布式系统问题**。这种复杂性反映了设计微服务时面临的挑战，其中组件必须高效通信，而不会创建瓶颈或刚性依赖。

像微服务一样，智能体必须高效通信，并确保其输出在更广泛的系统中有用。而且像任何服务一样，它们的输出不应该仅仅循环回AI应用程序——它们应该流向其他关键系统，如数据仓库、CRM、CDP和客户成功平台。

当然，你可以通过RPC和API连接智能体和工具，但这会导致紧密耦合的系统。紧密耦合使扩展、适应或支持同一数据的多个消费者变得更加困难。智能体需要灵活性。它们的输出必须无缝地流入其他智能体、服务和平台，而不会将一切锁定在刚性依赖中。

解决方案是什么？

通过事件驱动架构实现松散耦合。它是允许智能体共享信息、实时行动并与更广泛生态系统集成的骨干——没有紧密耦合的麻烦。

## 事件驱动架构：入门

在早期，软件系统是单体的。所有内容都存在于单个、紧密集成的代码库中。虽然构建简单，但随着增长，单体变成了噩梦。

扩展是一种笨拙的工具：即使只有一部分需要它，你也必须扩展整个应用程序。这种低效导致了臃肿的系统和脆弱的架构，无法处理增长。

微服务改变了这一点。

通过将应用程序分解为更小的、独立部署的组件，团队可以扩展和更新特定部分，而无需触及整个系统。但这带来了新的挑战：所有这些较小的服务如何有效通信？

如果我们通过直接RPC或API调用连接服务，我们将创建一个巨大的相互依赖混乱。如果一个服务宕机，它会影响连接路径上的所有节点。

![紧密耦合的微服务](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*9L5r8NQUQuY70hej.png)

*紧密耦合的微服务*

EDA解决了这个问题。

与紧密耦合的同步通信不同，EDA使组件能够通过事件异步通信。服务不会相互等待——它们对实时发生的事情做出反应。

![事件驱动架构](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*PKgr8AAZ9eLMf-47.png)

*事件驱动架构*

这种方法使系统更具弹性和适应性，使其能够处理现代工作流的复杂性。这不仅仅是技术突破；这是压力下系统的生存策略。

## 早期社交巨头的兴衰

早期社交网络如Friendster的[兴衰](https://highscalability.com/friendster-lost-lead-because-of-a-failure-to-scale/)强调了可扩展架构的重要性。Friendster早期就吸引了大量用户，但其系统无法应对需求。性能问题导致用户流失，平台最终失败。

另一方面，Facebook的成功不仅仅是因为其功能，还因为它投资于可扩展的基础设施。它没有在成功的重压下崩溃——它崛起成为主导者。

今天，我们面临着在AI智能体中看到类似故事上演的风险。

与早期社交网络一样，智能体将经历快速增长和采用。仅仅构建智能体是不够的。真正的问题是你的架构是否能处理分布式数据、工具集成和多智能体协作的复杂性。没有正确的基础，你的智能体栈可能会像社交媒体的早期牺牲品一样崩溃。

## 未来是事件驱动的智能体

AI的未来不仅仅是构建更智能的智能体——而是创建能够随着技术进步而发展和扩展的系统。随着AI栈和底层模型的快速变化，刚性设计很快成为创新的障碍。要跟上步伐，我们需要优先考虑灵活性、适应性和无缝集成的架构。EDA是这一未来的基础，使智能体能够在动态环境中蓬勃发展，同时保持弹性和可扩展性。

### 智能体作为具有信息依赖关系的微服务

智能体类似于微服务：它们是自主的、解耦的，能够独立处理任务。但智能体更进一步。

虽然微服务通常处理离散操作，但智能体依赖共享的、丰富上下文的信息来推理、做决策和协作。这对管理依赖关系和确保实时数据流创造了独特的需求。

例如，智能体可能从CRM中提取客户数据，分析实时分析，并使用外部工具——所有这些都在与其他智能体共享更新。这些交互需要一个系统，智能体可以独立工作，但仍能流畅地交换关键信息。

EDA通过充当数据的"中央神经系统"解决了这一挑战。它允许智能体异步广播事件，确保信息动态流动而不创建刚性依赖。这种解耦让智能体能够自主运作，同时无缝集成到更广泛的工作流和系统中。

![AI智能体的事件驱动架构](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*ZxrSHZDaN8-QpX8S.png)

*AI智能体的事件驱动架构*

### 解耦同时保持上下文完整

构建灵活系统并不意味着牺牲上下文。传统的、紧密耦合的设计通常将工作流绑定到特定的管道或技术，迫使团队应对瓶颈和依赖。堆栈一部分的变化会波及整个系统，减缓创新和扩展努力。

EDA消除了这些约束。通过解耦工作流并实现异步通信，EDA允许堆栈的不同部分——智能体、数据源、工具和应用层——独立运行。

以今天的AI栈为例。MLOps团队管理RAG等管道，数据科学家选择模型，应用开发人员构建界面和后端。紧密耦合的设计迫使所有这些团队进入不必要的相互依赖，减缓交付并使其更难适应新工具和技术的出现。

相比之下，事件驱动系统确保工作流保持松散耦合，允许每个团队独立创新。

应用层不需要理解AI的内部——它们只需在需要时消费结果。这种解耦还确保AI洞察不会孤立。智能体的输出可以无缝集成到CRM、CDP、分析工具等中，创造一个统一、适应性的生态系统。

### 使用事件驱动架构扩展智能体

EDA是向智能体系统过渡的骨干。

它解耦工作流同时实现实时通信的能力，确保智能体能够在规模上高效运行。正如[这里](https://hubertdulay.substack.com/p/event-driven-agent-mesh)所讨论的，像Kafka这样的平台体现了EDA在智能体驱动系统中的优势：

- **水平可扩展性**：Kafka的分布式设计支持无瓶颈地添加新智能体或消费者，确保系统轻松增长。
- **低延迟**：实时事件处理使智能体能够即时响应变化，确保快速可靠的工作流。
- **松散耦合**：通过Kafka主题而非直接依赖通信，智能体保持独立和可扩展。
- **事件持久性**：持久消息存储保证传输中不会丢失数据，这对高可靠性工作流至关重要。

![智能体作为实时流平台上的事件生产者和消费者](./The%20Future%20of%20AI%20Agents%20is%20Event-Driven.assets/0*uVCNQp4Oy3nFgkaQ.png)

*智能体作为实时流平台上的事件生产者和消费者*

数据流使业务全程数据持续流动。中央神经系统作为实时数据流的统一骨干，无缝连接不同的系统、应用和数据源，以实现高效的智能体通信和决策。

这种架构自然适合Anthropic的[模型上下文协议](https://www.anthropic.com/news/model-context-protocol)（MCP）等框架。

MCP提供了一个通用标准，用于将AI系统与外部工具、数据源和应用集成，确保安全无缝地访问最新信息。通过简化这些连接，MCP降低了开发工作量，同时实现了上下文感知的决策。

EDA解决了MCP旨在解决的许多挑战。MCP需要无缝访问多样化的数据源、实时响应能力以及可扩展性，以支持复杂的多智能体工作流。通过解耦系统并实现异步通信，EDA简化了集成，确保智能体可以在没有刚性依赖的情况下消费和生产事件。

## 事件驱动的智能体将定义AI的未来

AI领域正在快速发展，架构必须随之发展。

企业已经准备好了。Forum Ventures的[调查](https://www.forumvc.com/2024-the-rise-of-agentic-ai-in-the-enterprise)发现，48%的高级IT领导准备将AI智能体集成到运营中，33%表示他们非常准备好了。这显示了对能够扩展和处理复杂性的系统的明确需求。

EDA是构建灵活、有弹性和可扩展的智能体系统的关键。它解耦组件，实现实时工作流，并确保智能体能够无缝集成到更广泛的生态系统中。

那些采用EDA的人不仅能生存——他们将在这一新的AI创新浪潮中获得竞争优势。其余的？他们面临被淘汰的风险，成为自身无法扩展能力的牺牲品。 